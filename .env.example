# =============================================================================
# Bwaincell Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# For Raspberry Pi deployment: Place .env in ~/bwaincell/ on sunny-pi
# =============================================================================

# -----------------------------------------------------------------------------
# Discord Bot Configuration (REQUIRED)
# -----------------------------------------------------------------------------
BOT_TOKEN=your_bot_token_here
CLIENT_ID=your_client_id_here
GUILD_ID=your_guild_id_for_testing

# -----------------------------------------------------------------------------
# User Mapping - Email to Discord ID (REQUIRED for API authentication)
# -----------------------------------------------------------------------------
USER1_EMAIL=your@email.com
USER1_DISCORD_ID=your_discord_user_id_here
USER2_EMAIL=partner@email.com
USER2_DISCORD_ID=dandelion_discord_user_id_here

# -----------------------------------------------------------------------------
# Google OAuth Configuration (REQUIRED for API authentication)
# -----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret
ALLOWED_GOOGLE_EMAILS=user1@gmail.com,user2@gmail.com

# -----------------------------------------------------------------------------
# JWT Configuration (REQUIRED for API authentication)
# -----------------------------------------------------------------------------
# Generate with: openssl rand -base64 32
JWT_SECRET=generate_with_openssl_rand_base64_32

# -----------------------------------------------------------------------------
# API Server Configuration
# -----------------------------------------------------------------------------
# Port for Express API (health endpoint and REST API)
# Docker exposes this port - don't change unless you update docker-compose.yml
API_PORT=3000
PORT=3000

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
# PostgreSQL connection credentials
POSTGRES_USER=bwaincell
POSTGRES_PASSWORD=generate_with_openssl_rand_hex_32
POSTGRES_DB=bwaincell

# Database connection string
# Format: postgresql://user:password@host:port/database
# For Docker internal network, use service name 'postgres'
# For external connection (e.g., pgAdmin), use localhost:5433
DATABASE_URL=postgresql://bwaincell:${POSTGRES_PASSWORD}@postgres:5432/bwaincell

# Legacy SQLite path (will be removed after migration to PostgreSQL)
# DATABASE_PATH=./data/bwaincell.sqlite

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Timezone for reminders and scheduled tasks
# IMPORTANT: Set this BEFORE using DateTime.now() or Date operations
# Examples: America/Los_Angeles, America/Chicago, America/New_York, UTC
TIMEZONE=America/Chicago

# Discord channel ID for reminder announcements
DEFAULT_REMINDER_CHANNEL=your_channel_id_for_reminders

# Milliseconds before Discord command responses are auto-deleted
DELETE_COMMAND_AFTER=5000

# -----------------------------------------------------------------------------
# Deployment Configuration (Raspberry Pi)
# -----------------------------------------------------------------------------
# Environment mode (production for Pi deployment)
NODE_ENV=production

# Deployment platform identifier (optional)
DEPLOYMENT_MODE=pi

# -----------------------------------------------------------------------------
# Optional: Google Calendar Integration
# -----------------------------------------------------------------------------
# GOOGLE_CALENDAR_ID=primary
# GOOGLE_REDIRECT_URI=http://your-domain.com/oauth2callback

# =============================================================================
# GitHub Actions Secrets (for Auto-Deployment to Raspberry Pi)
# =============================================================================
# These secrets are NOT stored in .env - they go in GitHub repository settings
# Go to: Repository Settings → Secrets and variables → Actions → New repository secret
#
# Add these secrets for automated deployment:
#
# PI_HOST=sunny-pi
#   - Hostname or IP address of your Raspberry Pi
#   - Example: sunny-pi.local or 192.168.1.100
#
# PI_USERNAME=your_username
#   - SSH username for the Raspberry Pi
#   - Example: pi or your custom username
#
# PI_SSH_KEY=<paste entire private key>
#   - Your private SSH key for authentication
#   - To get your key: cat ~/.ssh/id_rsa (or id_ed25519)
#   - Copy ENTIRE key including -----BEGIN/END----- lines
#   - Example:
#     -----BEGIN OPENSSH PRIVATE KEY-----
#     b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn
#     ...
#     -----END OPENSSH PRIVATE KEY-----
#
# PI_SSH_PASSPHRASE=your_passphrase
#   - Passphrase for your SSH key (if you set one)
#   - Leave empty if your SSH key has no passphrase
#   - Skip this secret if not needed
#
# PI_SSH_PORT=22
#   - SSH port (default is 22)
#   - Only add if you use a custom SSH port
#
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...
#   - (OPTIONAL) Discord webhook for deployment notifications
#   - Create in Discord: Server Settings → Integrations → Webhooks
#   - Example: https://discord.com/api/webhooks/123456789/abcdefghijklmnop
#
# =============================================================================

# =============================================================================
# Deployment Notes
# =============================================================================
#
# Local Development:
#   - Copy this file to .env in project root
#   - Set NODE_ENV=development
#   - Use local timezone
#
# Raspberry Pi Deployment:
#   1. SSH into sunny-pi: ssh sunny-pi
#   2. Create .env file: nano ~/bwaincell/.env
#   3. Copy values from your Fly.io secrets or local .env
#   4. Set NODE_ENV=production
#   5. Set DEPLOYMENT_MODE=pi
#   6. Save and exit (Ctrl+X, Y, Enter)
#   7. Set permissions: chmod 600 .env
#   8. Deploy: docker compose up -d
#
# GitHub Actions Setup (for auto-deployment):
#   1. Go to GitHub repository → Settings → Secrets and variables → Actions
#   2. Click "New repository secret"
#   3. Add each secret from the "GitHub Actions Secrets" section above
#   4. Push to main branch to trigger auto-deployment
#   5. Monitor: https://github.com/<your-repo>/actions
#
# How to get your SSH key:
#   - On your local machine: cat ~/.ssh/id_rsa
#   - Copy ENTIRE output (including BEGIN/END lines)
#   - Paste into PI_SSH_KEY secret in GitHub
#
# Security:
#   - NEVER commit .env to git (already in .gitignore)
#   - NEVER share your BOT_TOKEN, JWT_SECRET, or SSH keys
#   - Set file permissions on Pi: chmod 600 .env
#   - Rotate JWT_SECRET periodically
#   - Use strong passwords for Google OAuth
#
# Troubleshooting:
#   - Deployment fails? Check GitHub Actions logs
#   - Bot won't start? Check: docker logs bwaincell-bot
#   - Can't SSH? Verify PI_HOST and PI_SSH_KEY are correct
#   - Health check fails? Verify PORT=3000 in .env
#
# =============================================================================
